<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>实时检测</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="${rc.contextPath}/statics/js/plugins/jquery/jquery-2.0.3.js"></script>
    <link href="${rc.contextPath}/statics/css/bootstrap.min.css" rel="stylesheet">
    <script src="${rc.contextPath}/statics/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="${rc.contextPath}/statics/css/dataTables/dataTables.bootstrap4.min.css">
    <script src="${rc.contextPath}/statics/js/plugins/dataTables/jquery.dataTables.min.js"></script>
    <script src="${rc.contextPath}/statics/js/plugins/dataTables/dataTables.bootstrap4.min.js"></script>
    <link href="${rc.contextPath}/statics/css/font-awesome.min.css" rel="stylesheet">
    <!--<script src="jquery/jquery-2.0.3.js"></script>-->
    <!--<script src="bootstrap.min.js"></script>-->
    <!--<script type="text/javascript" src='js/jquery.dataTables.min.js'></script>-->
    <!--<script type="text/javascript" src="js/dataTables.bootstrap4.min.js"></script>-->
    <!--<script type="text/javascript" src="js/datatables.min.js"></script>-->
    <script src="https://cdn.bootcss.com/vue/2.5.13/vue.js"></script>
    <style type="text/css">
        body{
            font-size: 14px !important;
        }
        .pagination > .active > a, .pagination > .active > span, .pagination > .active > a:hover, .pagination > .active > span:hover, .pagination > .active > a:focus, .pagination > .active > span:focus {
            background-color: #f4f4f4;
            border-color: #DDDDDD;
            color: inherit;
            cursor: default;
            z-index: 2;
        }

        .slide {
            min-width: 100%;
            height: 100%;
            overflow-x: auto;
        }
        .loader {
            vertical-align: middle;
            border: 5px solid #f3f3f3;
            border-radius: 50%;
            border-top: 5px solid #337ab7;
            border-bottom: 5px solid #337ab7;
            width: 25px;
            height: 25px;
            -webkit-animation: spin 2s linear infinite;
            animation: spin 2s linear infinite;
            display: inline-block;
        }

        @-webkit-keyframes spin {
            0% { -webkit-transform: rotate(0deg); }
            100% { -webkit-transform: rotate(360deg); }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .warning{
            margin-left: 5px;
            width: 115px;
            display: inline-block;
            color: black;
        }
        /*.dataTables_length {*/
            /*float: left;*/
        /*}*/
    </style>
</head>
<body>
<ul id="myTab" class="nav nav-tabs ">
    <li ><a href="#record_ping" data-toggle="tab">网络连通性</a></li>
    <li ><a href="#record_quality" data-toggle="tab">网络质量</a></li>
    <li><a href="#record_file" data-toggle="tab">文件传输</a></li>
    <li><a href="#record_browsing" data-toggle="tab">网页浏览</a></li>
    <li><a href="#record_video" data-toggle="tab">在线视频</a></li>
    <li><a href="#record_game" data-toggle="tab">网络游戏</a></li>
</ul>
<div id="myTabContent" class="tab-content" style="padding-top: 20px">
    <!--record_ping-->
    <div class="tab-pane fade" id="record_ping">
        <div class="container-fluid">

            <!--ping(ICMP)-->
            <div class="panel panel-default">
                <button type="button" class="btn btn-primary" data-toggle="collapse"
                        data-target="#ping">
                    PING(ICMP)
                </button>
                <div class="warning "></div>
               <span class="loader"></span>
            </div>
            <div class="row-fluid in slide" id="ping">

                <table class="table table-striped table-bordered table-hover " id="ping_table">

                </table>

            </div>
            <!--TRACEROUTE-->
            <div class="panel panel-default">
                <button type="button" class="btn btn-primary" data-toggle="collapse"
                        data-target="#tracert">
                    TRACE_ROUTE
                </button>
                <div class="warning"></div><span class="loader"></span>
            </div>
            <div class="row-fluid in slide" id="tracert">
                <table class="table table-striped table-bordered table-hover " id="ROUTE_table">
                </table>

            </div>

        </div>
    </div>
    <!--record_quality-->
    <div class="tab-pane fade" id="record_quality">
        <div class="container-fluid">
            <!--SLA-->
            <div class="panel panel-default">
                <button type="button" class="btn btn-primary" data-toggle="collapse"
                        data-target="#SLA">
                    SLA
                </button>
                <div class="warning"></div>
                <span class="loader"></span>
            </div>
            <div class="row-fluid in slide" id="SLA">

                <table class="table table-striped table-bordered table-hover " id="SLA_table">
                </table>
            </div>
            <!--DHCP-->
            <div class="panel panel-default">
                <button type="button" class="btn btn-primary" data-toggle="collapse"
                        data-target="#DHCP">
                    DHCP
                </button>
                <div class="warning"></div>
                <span class="loader"></span>
            </div>
            <div class="row-fluid in  " id="DHCP">

                <table class="table table-striped table-bordered table-hover " id="DHCP_table">

                </table>

            </div>
            <!--DNS-->
            <div class="panel panel-default">
                <button type="button" class="btn btn-primary" data-toggle="collapse"
                        data-target="#DNS">
                    DNS
                </button>
                <div class="warning"></div>
                <span class="loader"></span>
            </div>
            <div class="row-fluid in  " id="DNS">

                <table class="table table-striped table-bordered table-hover " id="dns_table">

                </table>

            </div>
            <!--Radius-->
            <div class="panel panel-default">
                <button type="button" class="btn btn-primary" data-toggle="collapse"
                        data-target="#Radius">
                    Radius
                </button>
                <div class="warning"></div>
                <span class="loader"></span>
            </div>
            <div class="row-fluid in  " id="Radius">

                <table class="table table-striped table-bordered table-hover " id="Radius_table">

                </table>

            </div>

        </div>
    </div>
    <!--record_file-->
    <div class="tab-pane fade" id="record_file">
        <div class="container-fluid">
            <!--FTP上传/下载-->
            <div class="panel panel-default">
                <button type="button" class="btn btn-primary" data-toggle="collapse"
                        data-target="#FTP">
                    FTP上传/下载
                </button>
                <div class="warning"></div>
                <span class="loader"></span>
            </div>
            <div class="row-fluid in slide" id="FTP">

                <table class="table table-striped table-bordered table-hover " id="FTP_table">

                </table>

            </div>
            <!--HTTP下载-->
            <div class="panel panel-default">
                <button type="button" class="btn btn-primary" data-toggle="collapse"
                        data-target="#HTTP_DOWN">
                    HTTP下载
                </button>
                <div class="warning"></div>
                <span class="loader"></span>
            </div>
            <div class="row-fluid in slide" id="HTTP_DOWN">

                <table class="table table-striped table-bordered table-hover " id="download_table">

                </table>

            </div>
        </div>
    </div>
    <!--record_browsing-->
    <div class="tab-pane fade" id="record_browsing">
        <div class="container-fluid">
            <!--HTTP页面浏览-->
            <div class="panel panel-default">
                <button type="button" class="btn btn-primary" data-toggle="collapse"
                        data-target="#HTTP">
                    HTTP页面浏览
                </button>
                <div class="warning"></div>
                <span class="loader"></span>
            </div>
            <div class="row-fluid in slide" id="HTTP">
                <table class="table table-striped table-bordered table-hover " id="HTTP_table">
                </table>
            </div>
        </div>
    </div>
    <!--record_video-->
    <div class="tab-pane fade" id="record_video">
        <div class="container-fluid">
            <!--在线视频-->
            <div class="panel panel-default">
                <button type="button" class="btn btn-primary" data-toggle="collapse"
                        data-target="#video">
                    在线视频
                </button>
                <div class="warning"></div>
                <span class="loader"></span>
            </div>
            <div class="row-fluid in slide" id="video">

                <table class="table table-striped table-bordered table-hover " id="video_table">
                </table>

            </div>
        </div>
    </div>
    <!--record_game-->
    <div class="tab-pane fade" id="record_game">
        <div class="container-fluid">
            <!--在线游戏-->
            <div class="panel panel-default">
                <button type="button" class="btn btn-primary" data-toggle="collapse"
                        data-target="#game">
                    在线游戏
                </button>
                <div class="warning"></div>
                <span class="loader"></span>
            </div>
            <div class="row-fluid  in  slide" id="game">
                <table class="table table-striped table-bordered table-hover " id="game_table">
                </table>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    $(function () {
        var url = location.search; //获取url中"?"符后的字串
        var theRequest = new Object();
        if (url.indexOf("?") != -1) {
            var str = url.substr(1);
            strs = str.split("?");
            for (var i = 0; i < strs.length; i++) {
                theRequest[strs[i].split("=")[0]] = decodeURI(strs[i].split("=")[1]);
            }
        }
        theRequest="{"+theRequest.dispatch+"}";
        RequestJson = JSON.parse(theRequest);
        var activeId = [];
        //根据内容显示tab页
        if (RequestJson.ping != undefined && RequestJson.sla != undefined && RequestJson.download != undefined && RequestJson.web != undefined && RequestJson.video != undefined && RequestJson.game != undefined) {
            activeId.push(1, 2, 3, 4, 5, 6)
        }
        if (RequestJson.ping != undefined) {
            activeId.push(1);
        }
        if (RequestJson.sla != undefined) {
            activeId.push(2);
        }
        if (RequestJson.download != undefined) {
            activeId.push(3);
        }
        if (RequestJson.web != undefined) {
            activeId.push(4);
        }
        if (RequestJson.video != undefined) {
            activeId.push(5);
        }
        if (RequestJson.game != undefined) {
            activeId.push(6);
        }

        var allId = [1, 2, 3, 4, 5, 6]
        var diffId = allId.minus(activeId);
        var sameId = Array.intersect(allId, activeId)
        diffId.forEach(function (o, x) {
            $("#myTab>li").eq(o - 1).css("display", "none");
        });
        $("#myTabContent>div").eq(sameId[0] - 1).addClass("in active");
        $("#myTab>li").eq(sameId[0] - 1).addClass("active");
    })
    Array.prototype.minus = function (arr) {
        var result = new Array();
        var obj = {};
        for (var i = 0; i < arr.length; i++) {
            obj[arr[i]] = 1;
        }
        for (var j = 0; j < this.length; j++) {
            if (!obj[this[j]]) {
                obj[this[j]] = 1;
                result.push(this[j]);
            }
        }
        return result;
    };
    Array.intersect = function () {
        var result = new Array();
        var obj = {};
        for (var i = 0; i < arguments.length; i++) {
            for (var j = 0; j < arguments[i].length; j++) {
                var str = arguments[i][j];
                if (!obj[str]) {
                    obj[str] = 1;
                }
                else {
                    obj[str]++;
                    if (obj[str] == arguments.length) {
                        result.push(str);
                    }
                }
            }
        }
        return result;
    };
</script>

<script type="text/javascript"
        src="${rc.contextPath}/statics/js/modules/diagnose/information.js?_${date.systemTime}"></script>
<script src="${rc.contextPath}/statics/js/plugins/resizableTable/colResizable-1.6.min.js"></script>
<script src="${rc.contextPath}/statics/js/plugins/resizableTable/dataTables.colResize.js"></script>

</body>
</html>